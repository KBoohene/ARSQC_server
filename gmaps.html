<!doctype html>
<html>
  <head>
    <style>
      #map {
        width: 1000px;
        height: 500px;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>

    <!-- Google Maps JS API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDVy-fqmHDhDqCo3N9MQFknESI5mbzOepU"></script>
    <!-- GMaps Library -->
    <script src="gmaps.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>

        /* Map Object */
        var mapObj = new GMaps({
          zoom:10,
          el: '#map',
          lat: 6.6871,
          lng: -1.622
        });


      $(document).ready(function(){

        var sourceLng, sourcelat;
        var destiLng, destiLat;
        $("#pos-link").click(function(event) {

            GMaps.geolocate({
              success: function(position) {
                mapObj.setCenter(position.coords.latitude, position.coords.longitude);
                sourceLng=position.coords.longitude;
                sourcelat=position.coords.latitude;
                //console.log(sourceLng);
                mapObj.addMarker({
                      lat: position.coords.latitude,
                      lng: position.coords.longitude
                    });
              },
              error: function(error) {
                alert('Geolocation failed: '+error.message);
              },
              not_supported: function() {
                alert("Your browser does not support geolocation");
              }
          });
        });

        $("#submit").click(function() {
            GMaps.geocode({
              address: $('#to').val(),
              callback: function(results, status) {
                if (status == 'OK') {
                  var latlng = results[0].geometry.location;
                   mapObj.setCenter(latlng.lat(), latlng.lng());
                    destiLat = latlng.lat();
                    destiLng =latlng.lng();
                    //console.log(destiLat);
                    mapObj.addMarker({
                      lat: latlng.lat(),
                      lng: latlng.lng()
                    });
                }
              }
            });




          });
      });

    </script>

    <form id="draw-route" name="draw-route" action="#" method="get">
      <label for="to">To:</label>
      <input type="text" id="to" name="to" required="required" placeholder="Another address" size="30" />
      <a id="pos-link" href="#">Get my position</a>
      <br />
      <button id="submit" type="button">Submit</button>
    </form>


  </body>
</html>
